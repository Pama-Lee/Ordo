#!/bin/sh
# Pre-commit hook: auto-format and check code before commit

set -e

echo "ðŸ”§ Running cargo fmt..."
cargo fmt --all

echo "ðŸ” Running cargo clippy..."
cargo clippy --all-targets --all-features -- -D warnings

echo "ðŸ”§ Running pnpm format (if available)..."
if [ -d "ordo-editor" ] && command -v pnpm >/dev/null 2>&1; then
    cd ordo-editor
    pnpm format 2>/dev/null || true
    cd ..
fi

# Stage any formatting changes
git add -u

echo "âœ… Pre-commit checks complete"
