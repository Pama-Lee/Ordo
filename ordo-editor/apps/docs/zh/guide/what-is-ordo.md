# Ordo 是什么？

**Ordo**（拉丁语意为“秩序”）是一款专为极致性能和可靠性设计的企业级规则引擎。它完全由 Rust 构建，能够以**亚微秒级延迟**评估业务规则，并支持**每秒 500,000+ 次执行**。

## 核心特性

### 可视化规则编辑器

使用直观的拖放式流程编辑器设计复杂的业务规则：

- **流程视图**：将规则逻辑可视化为连接的决策树
- **表单视图**：使用结构化表单界面编辑条件和动作
- **实时执行**：利用 WASM 驱动的执行功能即时测试规则
- **执行追踪**：通过可视化路径高亮进行分步调试

### 极速性能

- **1.63 µs** 平均规则执行时间
- 比 1ms 的目标**快 600 倍**
- 零分配热路径
- 预编译表达式评估

### 灵活的规则定义

- **步骤流模型**：带有条件跳转的线性决策步骤
- **丰富的表达式**：比较、逻辑运算符、函数、条件语句
- **内置函数**：`len()`、`sum()`、`avg()`、`upper()`、`lower()`、`abs()`、`min()`、`max()`
- **字段合并**：用于处理缺失字段的 `coalesce(field, fallback, default)`

### 生产就绪

- **确定性执行**：相同的输入 → 相同的路径 → 相同的结果
- **执行追踪**：全面了解调试的每一个步骤
- **热重载**：无需重启服务即可更新规则
- **审计日志**：追踪所有规则变更和执行

### 易于集成

- **HTTP REST API**：简单的基于 JSON 的接口
- **WebAssembly**：直接在浏览器中运行规则
- **gRPC 支持**：高性能二进制协议

## 架构

Ordo 由几个组件组成：

```
┌─────────────────────────────────────────────────────────────┐
│                     可视化编辑器 (Vue 3)                     │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐  │
│  │  流程视图    │  │  表单视图    │  │    执行追踪         │  │
│  └─────────────┘  └─────────────┘  └─────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                      ordo-wasm (WASM)                        │
│                     浏览器端规则执行                          │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│                     ordo-server (Rust)                       │
│  ┌─────────┐  ┌─────────┐  ┌─────────┐  ┌───────────────┐   │
│  │  HTTP   │  │  gRPC   │  │   UDS   │  │   规则存储     │   │
│  └─────────┘  └─────────┘  └─────────┘  └───────────────┘   │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                      ordo-core (Rust)                        │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────┐  │
│  │   执行器    │  │   评估器    │  │   表达式解析器      │  │
│  └─────────────┘  └─────────────┘  └─────────────────────┘  │
└─────────────────────────────────────────────────────────────┘
```

## 用例

Ordo 非常适合：

- **风险评估**：信用评分、欺诈检测、KYC 检查
- **定价规则**：动态定价、折扣计算、促销活动
- **资格检查**：贷款审批、保险承保
- **路由逻辑**：订单路由、负载均衡决策
- **合规规则**：监管检查、政策执行
- **功能开关**：A/B 测试、渐进式发布
